
---
page_title: "awscc_appsync_data_source Resource - terraform-provider-awscc"
subcategory: ""
description: |-
  Resource Type definition for AWS::AppSync::DataSource
---

# awscc_appsync_data_source (Resource)

Resource Type definition for AWS::AppSync::DataSource

## Example Usage

### AppSync DynamoDB Data Source Configuration

To create an AppSync API with a DynamoDB data source, this example sets up a complete configuration including the required IAM role with appropriate permissions and a DynamoDB table as the backend.

~> This example is generated by LLM using Amazon Bedrock and validated using terraform validate, apply and destroy. While we strive for accuracy and quality, please note that the information provided may not be entirely error-free or up-to-date. We recommend independently verifying the content.

```terraform
# Get current AWS region
data "aws_region" "current" {}

# Get current AWS account ID
data "aws_caller_identity" "current" {}

# Create AppSync API first
resource "aws_appsync_graphql_api" "example" {
  name                = "example-api"
  authentication_type = "API_KEY"

  tags = {
    "Modified By" = "AWSCC"
  }
}

# Create DynamoDB table that will be used as data source
resource "aws_dynamodb_table" "example" {
  name         = "example-table"
  billing_mode = "PAY_PER_REQUEST"
  hash_key     = "id"

  attribute {
    name = "id"
    type = "S"
  }

  tags = {
    "Modified By" = "AWSCC"
  }
}

# Create IAM role for AppSync to access DynamoDB
data "aws_iam_policy_document" "assume_role" {
  statement {
    effect = "Allow"
    principals {
      type        = "Service"
      identifiers = ["appsync.amazonaws.com"]
    }
    actions = ["sts:AssumeRole"]
  }
}

data "aws_iam_policy_document" "dynamodb_access" {
  statement {
    effect = "Allow"
    actions = [
      "dynamodb:GetItem",
      "dynamodb:PutItem",
      "dynamodb:DeleteItem",
      "dynamodb:UpdateItem",
      "dynamodb:Query",
      "dynamodb:Scan",
      "dynamodb:BatchGetItem",
      "dynamodb:BatchWriteItem"
    ]
    resources = [aws_dynamodb_table.example.arn]
  }
}

resource "aws_iam_role" "appsync_dynamodb_role" {
  name               = "AppSyncDynamoDBRole-Example"
  description        = "Role for AppSync to access DynamoDB"
  assume_role_policy = data.aws_iam_policy_document.assume_role.json

  inline_policy {
    name   = "AppSyncDynamoDBAccess"
    policy = data.aws_iam_policy_document.dynamodb_access.json
  }

  tags = {
    "Modified By" = "AWSCC"
  }
}

# Create AppSync data source
resource "aws_appsync_datasource" "example" {
  api_id = aws_appsync_graphql_api.example.id
  name   = "example_dynamodb_source"
  type   = "AMAZON_DYNAMODB"

  description = "Example DynamoDB data source"

  dynamodb_config {
    table_name = aws_dynamodb_table.example.name
    region     = data.aws_region.current.name
  }

  service_role_arn = aws_iam_role.appsync_dynamodb_role.arn
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `api_id` (String) Unique AWS AppSync GraphQL API identifier where this data source will be created.
- `name` (String) Friendly name for you to identify your AppSync data source after creation.
- `type` (String) The type of the data source.

### Optional

- `description` (String) The description of the data source.
- `dynamo_db_config` (Attributes) AWS Region and TableName for an Amazon DynamoDB table in your account. (see [below for nested schema](#nestedatt--dynamo_db_config))
- `elasticsearch_config` (Attributes) AWS Region and Endpoints for an Amazon OpenSearch Service domain in your account.
As of September 2021, Amazon Elasticsearch Service is Amazon OpenSearch Service. This property is deprecated. For new data sources, use OpenSearchServiceConfig to specify an OpenSearch Service data source. (see [below for nested schema](#nestedatt--elasticsearch_config))
- `event_bridge_config` (Attributes) ARN for the EventBridge bus. (see [below for nested schema](#nestedatt--event_bridge_config))
- `http_config` (Attributes) Endpoints for an HTTP data source. (see [below for nested schema](#nestedatt--http_config))
- `lambda_config` (Attributes) An ARN of a Lambda function in valid ARN format. This can be the ARN of a Lambda function that exists in the current account or in another account. (see [below for nested schema](#nestedatt--lambda_config))
- `metrics_config` (String)
- `open_search_service_config` (Attributes) AWS Region and Endpoints for an Amazon OpenSearch Service domain in your account. (see [below for nested schema](#nestedatt--open_search_service_config))
- `relational_database_config` (Attributes) Relational Database configuration of the relational database data source. (see [below for nested schema](#nestedatt--relational_database_config))
- `service_role_arn` (String) The AWS Identity and Access Management service role ARN for the data source. The system assumes this role when accessing the data source.

### Read-Only

- `data_source_arn` (String) The Amazon Resource Name (ARN) of the API key, such as arn:aws:appsync:us-east-1:123456789012:apis/graphqlapiid/datasources/datasourcename.
- `id` (String) Uniquely identifies the resource.

<a id="nestedatt--dynamo_db_config"></a>
### Nested Schema for `dynamo_db_config`

Optional:

- `aws_region` (String) The AWS Region.
- `delta_sync_config` (Attributes) The DeltaSyncConfig for a versioned datasource. (see [below for nested schema](#nestedatt--dynamo_db_config--delta_sync_config))
- `table_name` (String) The table name.
- `use_caller_credentials` (Boolean) Set to TRUE to use AWS Identity and Access Management with this data source.
- `versioned` (Boolean) Set to TRUE to use Conflict Detection and Resolution with this data source.

<a id="nestedatt--dynamo_db_config--delta_sync_config"></a>
### Nested Schema for `dynamo_db_config.delta_sync_config`

Optional:

- `base_table_ttl` (String) The number of minutes that an Item is stored in the data source.
- `delta_sync_table_name` (String) The Delta Sync table name.
- `delta_sync_table_ttl` (String) The number of minutes that a Delta Sync log entry is stored in the Delta Sync table.



<a id="nestedatt--elasticsearch_config"></a>
### Nested Schema for `elasticsearch_config`

Optional:

- `aws_region` (String) The AWS Region.
- `endpoint` (String) The endpoint.


<a id="nestedatt--event_bridge_config"></a>
### Nested Schema for `event_bridge_config`

Optional:

- `event_bus_arn` (String) ARN for the EventBridge bus.


<a id="nestedatt--http_config"></a>
### Nested Schema for `http_config`

Optional:

- `authorization_config` (Attributes) The authorization configuration. (see [below for nested schema](#nestedatt--http_config--authorization_config))
- `endpoint` (String) The endpoint.

<a id="nestedatt--http_config--authorization_config"></a>
### Nested Schema for `http_config.authorization_config`

Optional:

- `authorization_type` (String) The authorization type that the HTTP endpoint requires.
- `aws_iam_config` (Attributes) The AWS Identity and Access Management settings. (see [below for nested schema](#nestedatt--http_config--authorization_config--aws_iam_config))

<a id="nestedatt--http_config--authorization_config--aws_iam_config"></a>
### Nested Schema for `http_config.authorization_config.aws_iam_config`

Optional:

- `signing_region` (String) The signing Region for AWS Identity and Access Management authorization.
- `signing_service_name` (String) The signing service name for AWS Identity and Access Management authorization.




<a id="nestedatt--lambda_config"></a>
### Nested Schema for `lambda_config`

Optional:

- `lambda_function_arn` (String) The ARN for the Lambda function.


<a id="nestedatt--open_search_service_config"></a>
### Nested Schema for `open_search_service_config`

Optional:

- `aws_region` (String) The AWS Region.
- `endpoint` (String) The endpoint.


<a id="nestedatt--relational_database_config"></a>
### Nested Schema for `relational_database_config`

Optional:

- `rds_http_endpoint_config` (Attributes) Information about the Amazon RDS resource. (see [below for nested schema](#nestedatt--relational_database_config--rds_http_endpoint_config))
- `relational_database_source_type` (String) The type of relational data source.

<a id="nestedatt--relational_database_config--rds_http_endpoint_config"></a>
### Nested Schema for `relational_database_config.rds_http_endpoint_config`

Optional:

- `aws_region` (String) AWS Region for RDS HTTP endpoint.
- `aws_secret_store_arn` (String) The ARN for database credentials stored in AWS Secrets Manager.
- `database_name` (String) Logical database name.
- `db_cluster_identifier` (String) Amazon RDS cluster Amazon Resource Name (ARN).
- `schema` (String) Logical schema name.

## Import

Import is supported using the following syntax:

```shell
$ terraform import awscc_appsync_data_source.example "data_source_arn"
```
